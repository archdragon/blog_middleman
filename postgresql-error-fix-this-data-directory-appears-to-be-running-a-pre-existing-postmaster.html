<!DOCTYPE html><html><head><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" /><title>PostgreSQL error fix: This data directory appears to be running a pre-existing postmaster</title><link href="//fonts.googleapis.com/css?family=Bitter|Open+Sans:300" rel="stylesheet" type="text/css" /><link href="/stylesheets/site.css" rel="stylesheet" /><link href="/stylesheets/post.css" rel="stylesheet" /><link href="/stylesheets/highlight.css" rel="stylesheet" /><script src="/javascripts/all.js"></script></head><body class="postgresql-error-fix-this-data-directory-appears-to-be-running-a-pre-existing-postmaster"><header class="post-header"><div class="container"><div class="col-sm-8 col-sm-offset-2"><p><a href="/">Krowinski.com Blog</a></p><h1 class="post-title">PostgreSQL error fix: This data directory appears to be running a pre-existing postmaster</h1></div></div></header><main class="post-main"><div class="container"><div class="col-sm-8 col-sm-offset-2"><h2>Error</h2>

<p>On MacOs, after system restart or when computer is waking up from sleep the following message appears:</p>
<pre class="highlight shell"><code>this data directory appears to be running a pre-existing postmaster
</code></pre>
<h2>Solution</h2>

<ol>
<li><p>Run:</p>
<pre class="highlight shell"><code><span class="nb">declare</span> -x <span class="nv">PGDATA</span><span class="o">=</span><span class="s2">"/Users/your_name/Library/Application Support/Postgres/var-9.4/"</span>
</code></pre>
<p>where <code>your_name</code> is your user name (you can get it by running <code>whoami</code> command in the terminal).</p></li>
<li><p>Restart or stop postgres</p>
<pre class="highlight shell"><code>pg_ctl restart -m fast
</code></pre>
<p>or</p>
<pre class="highlight shell"><code>pg_ctl stop -m fast
</code></pre></li>
</ol>
<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = "http://blog.krowinski.com/postgresql-error-fix-this-data-directory-appears-to-be-running-a-pre-existing-postmaster.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "3"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//krowinski-blog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div></div></main><footer>&nbsp;</footer></body></html>